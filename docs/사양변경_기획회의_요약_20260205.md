# Storige 사양 변경 기획 요약

**작성일**: 2026년 2월 5일 (목)
**마감일**: 2026년 2월 14일 (토)
**가용 시간**: 하루 4시간 (21:00 ~ 01:00)

---

## 변경 항목 요약

| 항목 | 예상 소요 | 실현 가능성 |
|------|-----------|------------|
| 1. 인쇄 PDF 분리 | 2일 | 90% |
| 2. 스프레드 편집 | 5일 | 70% |
| 3. 명함 상품 추가 | 2일 | 85% |

**총 예상 소요**: 6.5일 → **마감 준수 가능** (2일 버퍼)

---

## 1. 인쇄 PDF 분리

### 변경 내용
- **현재**: 표지 + 내지가 하나의 PDF로 출력
- **변경**: 표지와 내지를 **별도 PDF 파일**로 분리 출력

### 영향 범위
- Storige: PDF 생성 로직 수정
- 북모아: 웹훅 수신 파싱, 파일 저장 로직, 다운로드 링크 2개 노출

### 하위 호환
- 기존 시스템은 그대로 동작 (분리 옵션 기본값 OFF)
- 신규 옵션 활성화 시에만 분리 출력

---

## 2. 스프레드 편집 (표지+날개+책등 동시 편집)

### 변경 내용
- **현재**: 표지, 날개, 책등을 각각 **개별 페이지**로 편집
- **변경**: 한 화면에서 **스프레드 뷰**로 동시 편집

### 책 구조
```
[뒷날개] - [뒷표지] - [책등] - [내지들] - [앞표지] - [앞날개]
```

### 핵심 기능
1. **스프레드 뷰**: 표지 전체를 펼친 상태로 편집
2. **동적 책등**: 내지 페이지 추가/삭제 시 책등 너비 자동 조정
3. **영역 가이드라인**: 각 영역(날개, 표지, 책등) 경계 표시

### 정책 결정 필요
- **객체 위치 처리**: 책등 크기 변경 시 인접 객체를 어떻게 처리할지
  - 방안 A: 각 영역 내 상대 좌표 유지 (권장)
  - 방안 B: 책등 오른쪽 영역 전체 이동

---

## 3. 명함 상품 추가

### 변경 내용
- **현재**: 에디터로 디자인하는 상품만 지원
- **변경**: **파일 업로드 → 검증 → 주문** 플로우 추가 (에디터 없음)

### 사용자 플로우
```
상품 선택 → PDF 업로드 → 자동 검증 → 검증 결과 확인 → 주문
```

### 검증 항목
- 페이지 크기 (규격 일치 여부)
- 해상도 (DPI)
- 여백/재단선

### AI 파일 지원
- ❌ **기술적으로 불가** (파서 부재)
- 대안: "AI 파일은 PDF로 변환하여 업로드" 안내

---

## 일정

| 날짜 | 요일 | 작업 항목 | 주요 마일스톤 |
|------|------|----------|--------------|
| 2/5 | 목 | PDF 분리 | |
| 2/6 | 금 | PDF 분리 | ⚠️ 북모아 연동 포함 |
| 2/7 | 토 | 스프레드 | |
| 2/8 | 일 | 스프레드 | |
| 2/9 | 월 | 스프레드 | |
| 2/10 | 화 | 스프레드 | ⚠️ 레거시 호환 테스트 |
| 2/11 | 수 | 명함 | |
| 2/12 | 목 | 명함 | |
| 2/13 | 금 | 통합 테스트 | ⚠️ E2E 리그레션 |
| **2/14** | **토** | **배포** | **마감** |

---

## 리스크 및 대응

### 핵심 리스크
> 기능 구현보다 **시스템 간 연동 변경**이 더 큰 리스크

| 리스크 | 영향 | 대응 |
|--------|------|------|
| 북모아 웹훅 수정 지연 | PDF 분리 배포 불가 | 2/6 북모아 작업 필수 포함 |
| 스프레드 정책 미결정 | 버그 수정 기간 초과 | 사전 정책 확정 필요 |
| 레거시 템플릿 호환 | 기존 데이터 손상 | 2/10 마이그레이션 테스트 |

---

## 결정 필요 사항

1. **스프레드 객체 위치 정책**
   - [ ] 방안 A: 영역 내 상대 좌표 유지
   - [ ] 방안 B: 책등 기준 전체 이동

2. **명함 AI 파일 미지원 공지 문구**
   - [ ] "PDF 파일만 지원됩니다"
   - [ ] "AI 파일은 PDF로 변환 후 업로드해주세요"

3. **PDF 분리 기본값**
   - [ ] 기본 OFF (하위호환)
   - [ ] 기본 ON (신규 동작)

---

## 다음 단계

1. 위 결정 사항 확정
2. 2/5(목) 21:00 개발 시작
3. 2/6(금) 북모아 연동 작업 조율
